---
import GeneralLayout from "../layouts/GeneralLayout.astro";
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);
---

<GeneralLayout>
	<article class="prose lg:prose-xl">
	  <h1>Articles</h1>
    <ul>
      {
        posts.map((post) => {
          const path = post.id.slice(0, post.id.lastIndexOf("/")).toLowerCase();

          return (
            <li>
              <span class="createDate">
                <FormattedDate date={post.data.date} />
              </span>{" "}
              <a href={`/post/${path}/`}>
                  <span class="title">{ post.data.title }</span>
              </a>
            </li>
          );
        })
      }
    </ul>
  </article>
</GeneralLayout>

<style>
    a {
        text-decoration: none;
    }

    .createDate {
        display: inline-block;
        font-size: .9rem;
        text-align: right;
        margin-right: 10px;
    }

    li {
        margin-top: 5px;
        margin-bottom: 3px;
    }
</style>
