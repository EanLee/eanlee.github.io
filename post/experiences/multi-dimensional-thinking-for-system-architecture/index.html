<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>開發雜談 - 對於系統架構的多維度思考能力 - 伊恩的開發狂想</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7903108559996033" crossorigin=anonymous></script><meta name=description content="當思考的維度不同時，會評估與參考資訊的側重點均有不同，影響最後作出的決策。"><meta property="og:title" content="開發雜談 - 對於系統架構的多維度思考能力"><meta property="og:description" content="當思考的維度不同時，會評估與參考資訊的側重點均有不同，影響最後作出的決策。"><meta property="og:type" content="article"><meta property="og:url" content="https://eandev.com/post/experiences/multi-dimensional-thinking-for-system-architecture/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-06-18T17:10:57+00:00"><meta property="article:modified_time" content="2022-06-20T01:41:53+00:00"><meta itemprop=name content="開發雜談 - 對於系統架構的多維度思考能力"><meta itemprop=description content="當思考的維度不同時，會評估與參考資訊的側重點均有不同，影響最後作出的決策。"><meta itemprop=datePublished content="2022-06-18T17:10:57+00:00"><meta itemprop=dateModified content="2022-06-20T01:41:53+00:00"><meta itemprop=wordCount content="147"><meta itemprop=keywords content="自我修練,思維模式,"><meta name=twitter:card content="summary"><meta name=twitter:title content="開發雜談 - 對於系統架構的多維度思考能力"><meta name=twitter:description content="當思考的維度不同時，會評估與參考資訊的側重點均有不同，影響最後作出的決策。"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap"><link rel=stylesheet href=/css/style.min.css><link rel="shortcut icon" href=/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-4HXSCXTZKZ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4HXSCXTZKZ",{anonymize_ip:!1})}</script></head><body class=body><div class="container container--outer"><header class=header><div class=container><div class="logo logo--mixed"><a class=logo__link href=/ title=伊恩的開發狂想 rel=home><div class="logo__item logo__imagebox"><img class=logo__img alt=logo src=/img/placeholder.png></div><div class="logo__item logo__text"><div class=logo__title>伊恩的開發狂想</div><div class=logo__tagline>在知識大海中漂流的小船，不停追尋屬於自己的秘寶。專注於 .NET、雲端技術、系統架構、開發技巧的道、法、術。</div></div></a></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>開發雜談 - 對於系統架構的多維度思考能力</h1><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>伊恩</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2022-06-18T17:10:57Z>2022-06-18</time>
<time class=meta__text datetime=2022-06-20T01:41:53Z>(Last Modified: 2022-06-20)</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/%E9%96%8B%E7%99%BC%E9%9B%9C%E8%AB%87/ rel=category>開發雜談</a></span></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#局部視角>局部視角</a></li><li><a href=#全局視角>全局視角</a></li><li><a href=#小結>小結</a></li><li><a href=#延伸閱讀>延伸閱讀</a></li></ul></nav></div></div><div class="content post__content clearfix"><p>在研究某個軟體的系統架構，發現一個值得探討的問題。</p><p>當設計系統架構時，使用何種的視界去分析與設計，會得到不一樣的設計結果，但結果是否為當下最佳的解決方案？</p><h2 id=局部視角>局部視角</h2><p>假設後端服務的開發團隊，收到開發 APIs 的任務，而且此 APIs 需公開於開放網路。</p><p>開發團隊以專業角度出發，基於資安考量的前提下，規劃每一支 API 的請求，都會進行 API 存取合法性的驗證。所以建立 Identity Server，負責 Token 的發送與驗送。</p><ul><li>在每次呼叫 API 之前，都必須先取得一組 Token 資訊，這組 Token 資訊會包含著請求的有效時間限制以及使用者的資訊。</li><li>在呼叫 API 時，將取回的 Token 作為必要參數，一同送至 API。</li><li>API 收到請求後，先進行 Token 的驗證。驗證失敗，直接中斷動作，反之，成功回傳 API 的資訊。</li></ul><p><figure><center><img src=images/design-base-on-API.png alt="design base on API"><figcaption>design base on API</figcaption></center></figure></p><p>這種做法是很合理，因為 APIs 的本身暴露在公開的網路環境中，基於零信任的原則，所以必須對每組 API 的請求，都進行相關身份的驗證。</p><p>若思考的維度只關注在 APIs 的本身，很容易會陷入一種情境。當系統發現異常或整合問題時，APIs 端的開發人員會堅持 APIs 的設計沒有問題，一定是其他部份有問題，或是使用端有問題。</p><p>當前端與後端分別不同部門，在穀倉效率的影響下，這種事其實蠻容易發生的。因為大家都會站在自己的專業角度去進行設計，個別負責部份都很完美，但組合起來的時候就會發現一些很奇妙的問題。</p><h2 id=全局視角>全局視角</h2><p><strong>當思考的維度，從單純的 APIs 開發角度抽離，改為關注 APIs 所服務的對象、系統架構的全貌，客戶所關心的重點。</strong></p><p>與相關人員確認後，會發現 APIs 主要提供站台使用，可以初步勾勒出的系統的全貌。</p><p><figure><center><img src=images/web-host-connet-to-api.png alt="站台呼叫 API"><figcaption>站台呼叫 API</figcaption></center></figure></p><p>與站台的開發人員，確認會從 JavaScript 直接呼叫 APIs，進行業務層級的操作。</p><p><figure><center><img src=images/web-pure-front-connect-to-api.png alt="純前端呼叫 API"><figcaption>純前端呼叫 API</figcaption></center></figure></p><p>再進一步確認使用情境，發現首頁與特定頁面，需要使用 server side rendering(SSR) 產出頁面。以首頁為例，產出頁面過程中，需要呼叫 10 支 API 組成所需資料。</p><p><figure><center><img src=images/web-server-render-connect-to-api.png alt="站台呼叫 API"><figcaption>站台呼叫 API</figcaption></center></figure></p><p>試著從分析 Client 站連入首頁時，系統一連串的動作行為，會發現在載入 server side rendering 的頁面時，所需要觸發的 API 背後的動作。</p><ol><li>首先跟 Identity Server 取得一組 Token。</li><li>利用 Token，進行 API 的呼叫。</li><li>APIs 收到請求後，會將 Token 傳到 Identity Server 進行驗證。</li><li>驗證成功後，進行 API 本身的職責，並回傳結果。</li></ol><p>發現步驟 2~4 重覆 10 次，每個 API request 都會呼叫一次 Identity Server，進行 Token 的驗證。</p><p>總觀來看，其中 9 次的 Token 驗證其實是一個重複性的動作。當然不能說這一個設計有問題，可是從全面性的角度去審視系統架構整體，發現這樣的設計，會對 Identity Server 造成額外的負載，就需要評估這些負載的損耗是必要的嗎？或是可以節省下來？</p><p>這其實暴露出系統的規劃與設計，是基於何種維度/視角。</p><p>當從局部的角度，去看待一件事情的時候，只有那一個範圍。當評估的維度，往上再拉一層，從全局的角度去看待這件事情的時候，其實會發現當初的最佳解，或許對整個系統而言可能是一個脆弱環節或是瓶頸。</p><h2 id=小結>小結</h2><p>回歸到問題的本質，就是設計之初，是否有看見全貌，明白了解這個系統主要要解決的痛點是什麼？客戶要的是什麼？</p><p><strong>其實在大多數的情況下，客戶根本不在意是用什麼樣的技術和方法，能不能解決問題、是否能滿足業務上的需求，這才是他們關注的重點。</strong></p><p>局部最佳解，有時並非系統的最優解。</p><p>從局部最佳解來看的話，有時需要額外投入更多的資源進行開發。一旦回到全局的角度來看，有些設計其實是多餘的，或是對系統造成額外負擔。</p><p>一但發生未滿足客戶的要求，後續可能需要二次調整，這是一種過度設計造成的成本浪費。</p><p>倒不如在專案之初，所有成員提出方法後，進行系統全面性的審視，有時候就可以發現某些功能和設計其實是可以被忽略，或是發現有部分情境未被考慮，在未來可能是系統脆弱的環節。</p><h2 id=延伸閱讀>延伸閱讀</h2><ul><li>Andrew Wu， <a href=https://columns.chicken-house.net/2021/06/04/slo/>[架構師的修練] #2， SLO - 如何確保服務水準？</a></li><li>Ruddy， <a href=https://ruddyblog.wordpress.com/2020/09/14/%e5%b7%a5%e7%a8%8b%e5%b8%ab%e7%9a%84%e6%a9%9f%e6%9c%83%e6%88%90%e6%9c%ac/>工程師的機會成本</a></li></ul></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><a class=tag href=/tags/%E8%87%AA%E6%88%91%E4%BF%AE%E7%B7%B4/ rel=tag>自我修練</a>
<a class=tag href=/tags/%E6%80%9D%E7%B6%AD%E6%A8%A1%E5%BC%8F/ rel=tag>思維模式</a></ul></div></footer><hr><div><p>文章內容均為個人學習記錄、心得與認知，若任何謬誤或建議，歡迎直接留言討論，一同成長。</p></div><iframe class=LikeCoin src="https://button.like.co/in/embed/wosilee/button?referrer=https%3a%2f%2feandev.com%2fpost%2fexperiences%2fmulti-dimensional-thinking-for-system-architecture%2f" height=200 width=100% frameborder=0></iframe></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/post/series/message-queue/queue/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Queue 佇列的概念</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/post/series/coding-skill/foreword/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>持續優化程式碼品質(持續補完中)</p></a></div></nav><section class=comments><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//eanblog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2023 伊恩軟體技術學習與分享.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div></body></html>