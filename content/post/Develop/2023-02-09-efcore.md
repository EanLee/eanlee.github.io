---
title: efcore
description: null
date: 2023-02-09T05:40:06.366Z
categories: null
tags: 
- EF Core
- Postgresql
keywords: 
- EF Core
- Postgresql
draft: true
---

> ğŸ”– é•·è©±çŸ­èªª ğŸ”–
>

<!--more-->



`The Entity Framework tools version '6.0.8' is older than that of the runtime '7.0.1'. Update the tools for the latest features and bug fixes. See https://aka.ms/AAc1fbw for more information.`

ç•¶ç™¼ç”Ÿä¸Šè¿°çš„è¨Šæ¯æ™‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æŒ‡ä»¤ä¾†æ›´æ–°æœ¬æ©Ÿå…§çš„ EF Core çš„ Tools å·¥å…·ç‰ˆæœ¬ã€‚

```shell
 dotnet tool update --global dotnet-ef
```

```shell
dotnet ef dbcontext scaffold <connect_string> Npgsql.EntityFrameworkCore.PostgreSQL

# ä¾‹å­
dotnet ef dbcontext scaffold "Host=localhost;Database=habitsQuest;Username=postgres;Password=psg1234;Trust Server Certificate=true" Npgsql.EntityFrameworkCore.PostgreSQL
```

è‹¥æ˜¯é€£ç·šå­—ä¸²å…§çš„`Databas` åç¨±èˆ‡å¯¦éš›è³‡æ–™åº«åç¨±å¤§å°å¯«ä¸åŒï¼Œæœƒç™¼ç”Ÿæ‰¾ä¸åˆ°è³‡æ–™åº«çš„éŒ¯èª¤ã€‚è¦ç‰¹åˆ¥æ³¨æ„ã€‚

è‹¥æ˜¯æƒ³è¦æŒ‡å®šç”¢ç”Ÿå‡ºä¾†çš„ `<DBContext.cs>` æ”¾åˆ°æŒ‡å®šä½ç½®ï¼Œè¨˜å¾—é¡åŠ ä½¿ç”¨ `-o <Path>` çš„æŒ‡ä»¤ã€‚å¦å‰‡ç”¢ç”Ÿå‡ºä¾†çš„ä½ç½®èˆ‡ .csproj çš„ä½ç½®ç›¸åŒã€‚

```shell
dotnet ef dbcontext scaffold <connect_string> Npgsql.EntityFrameworkCore.PostgreSQL -o Models
```

è‹¥å…ˆå‰å·²ç¶“æœ‰ç”¢ç”Ÿé `<DBContext>` ç›¸é—œæª”æ¡ˆï¼Œç›´æ¥åŸ·è¡ŒæŒ‡ä»¤æœƒå‡ºç¾ `The following file(s) already exist in directory 'c:\Codes\Repository\Models': HabitsQuestContext.cs,Quest.cs. Use the Force flag to overwrite these files.` éŒ¯èª¤è¨Šæ¯ã€‚æ‰€ä»¥æˆ‘å€‘å¿…é ˆåœ¨æŒ‡ä»¤åŠ ä¸Š `-f`ï¼Œå‘ŠçŸ¥ `ef dbcontext scaffold` è¦è¦†å¯«å…ˆå‰å·²å­˜åœ¨çš„æª”æ¡ˆã€‚

```shell
dotnet ef dbcontext scaffold <connect_string> Npgsql.EntityFrameworkCore.PostgreSQL -o Models -f
```

ä½†è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°çš„æŒ‡ä»¤æ‰€ç”¢ç”Ÿå‡ºä¾† DBContext.cs å…§ï¼Œæœƒå«æœ‰é€£ç·šå­—ä¸²ï¼Œç‚ºäº†é¿å…è³‡è¨Šå¤–æ´©ï¼Œå‹™å¿…è¨˜å¾—ç§»é™¤ï¼Œæ”¹ç”¨ configuration æ³¨å…¥çš„æ–¹å¼ã€‚

æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼

```shell
# å¾…èª¿æ•´ç‚º Postgresql çš„æ–¹å¼
dotnet user-secrets init
dotnet user-secrets set ConnectionStrings:Chinook "Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=Chinook"
dotnet ef dbcontext scaffold Name=ConnectionStrings:Chinook Microsoft.EntityFrameworkCore.SqlServer
```

åœ¨ä½¿ç”¨ `user-secrets` å¾Œï¼Œç³»çµ±æœƒæŠŠæ©Ÿæ•è³‡æ–™å­˜æ”¾åˆ°....

## å»¶ä¼¸é–±è®€

â–¶ ç«™å…§æ–‡ç« 

- [Npgsql Entity Framework Core Provider | Npgsql Documentation](https://www.npgsql.org/efcore/)
- [Entity Framework Core å·¥å…·åƒè€ƒ - EF Core | Microsoft Learn](https://learn.microsoft.com/zh-tw/ef/core/cli/)